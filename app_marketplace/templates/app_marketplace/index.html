<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>VitrineZap by √âVORA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Estilo customizado -->
  <style>
    .hero {
      background: linear-gradient(135deg, #1d3557, #457b9d);
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#">VitrineZap</a>

      <!-- Bot√µes de a√ß√£o no canto direito -->
      <div class="ms-auto">
        <a class="btn btn-outline-primary me-2" href="{% url 'cadastro' %}">Cadastre-se</a>
        <a class="btn btn-primary"  href="{% url 'login' %}">Entrar</a>
      </div>
    </div>
  </nav>



  <section class="hero text-center text-white d-flex align-items-center" style="background: linear-gradient(135deg, #1d3557, #457b9d); height: 90vh;">
    <div class="container">
      <h1 class="display-4 fw-bold">üöÄ O Futuro do Com√©rcio Distribu√≠do</h1>
      <p class="lead mt-4">DropKeeper √© a rede inteligente onde Keepers e Shoppers colaboram para entregar produtos com confian√ßa e agilidade.</p>
      <a href="#sobre" class="btn btn-outline-light btn-lg mt-4">Saiba mais</a>
    </div>
  </section>

  <section id="sobre" class="py-5">
    <div class="container text-center">
      <h2 class="fw-bold">O que √© o VitrineZap</h2>
      <p class="lead mt-3">Plataforma de DropKeeper com Keeper Mesh Network (KMN) - onde produtos reais encontram clientes atrav√©s de uma rede de confian√ßa distribu√≠da.</p>
    </div>
  </section>

  <!-- Se√ß√£o de Captura de Leads -->
  <section id="lista-antecipada" class="py-5 bg-light">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-6">
          <div class="card shadow">
            <div class="card-body p-4">
              <h3 class="card-title text-center mb-4">üì± Receba Vitrines no WhatsApp</h3>
              <p class="text-center text-muted mb-4">Cadastre-se para receber produtos exclusivos diretamente no seu WhatsApp!</p>
              
              <form id="leadForm" method="POST" action="{% url 'capture_lead' %}" class="needs-validation" novalidate>
                <!-- Honeypot invis√≠vel -->
                <input type="text" name="website" style="display:none" tabindex="-1" autocomplete="off">

                <!-- Retorno para a home do VitrineZap -->
                <input type="hidden" name="return_url" value="/#lista-antecipada">

                <!-- Identidade do projeto chamador -->
                <input type="hidden" name="source_system" value="vitrinezap">
                <input type="hidden" name="source_entrypoint" value="home">
                <input type="hidden" name="source_context" value="lista_antecipada">

                <div class="mb-3">
                  <label for="nome" class="form-label">Nome</label>
                  <input type="text" id="nome" name="nome" class="form-control" required>
                  <div class="invalid-feedback">Por favor, informe seu nome.</div>
                </div>

                <div class="row g-2">
                  <div class="col-12 col-sm-6">
                    <label for="whatsapp" class="form-label">WhatsApp</label>
                    <input type="text" id="whatsapp" name="whatsapp" class="form-control" placeholder="(00) 00000-0000" required>
                    <div class="invalid-feedback">Por favor, informe seu WhatsApp.</div>
                  </div>
                  <div class="col-12 col-sm-6">
                    <label for="email" class="form-label">E-mail</label>
                    <input type="email" id="email" name="email" class="form-control" placeholder="seu@email.com" required>
                    <div class="invalid-feedback">Por favor, informe um e-mail v√°lido.</div>
                  </div>
                </div>

                <div class="mt-3">
                  <label for="cidade" class="form-label">Cidade/Bairro (opcional)</label>
                  <input type="text" id="cidade" name="cidade" class="form-control" placeholder="Sua cidade ou bairro">
                </div>

                <!-- Mensagem de feedback -->
                <div id="formFeedback" class="alert mt-3" style="display: none;"></div>

                <button type="submit" id="submitBtn" class="btn btn-primary w-100 mt-3 fw-bold">
                  <span id="submitText">Quero receber vitrines no WhatsApp</span>
                  <span id="submitSpinner" class="spinner-border spinner-border-sm ms-2" style="display: none;" role="status" aria-hidden="true"></span>
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="bg-dark text-white text-center py-4">
    <div class="container">
      <p class="mb-1">¬© 2025 VitrineZap by √âVORA</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    // Valida√ß√£o e envio do formul√°rio
    (function() {
      'use strict';
      
      const form = document.getElementById('leadForm');
      const submitBtn = document.getElementById('submitBtn');
      const submitText = document.getElementById('submitText');
      const submitSpinner = document.getElementById('submitSpinner');
      const feedback = document.getElementById('formFeedback');
      
      form.addEventListener('submit', async function(event) {
        event.preventDefault();
        event.stopPropagation();
        
        if (!form.checkValidity()) {
          form.classList.add('was-validated');
          return;
        }
        
        // Desabilitar bot√£o e mostrar loading
        submitBtn.disabled = true;
        submitText.textContent = 'Enviando...';
        submitSpinner.style.display = 'inline-block';
        feedback.style.display = 'none';
        
        // Coletar dados do formul√°rio
        const formData = new FormData(form);
        
        try {
          const response = await fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: {
              'X-Requested-With': 'XMLHttpRequest'
            }
          });
          
          const result = await response.json();
          
          if (result.ok) {
            // Sucesso
            feedback.className = 'alert alert-success mt-3';
            feedback.textContent = result.message || 'Cadastro realizado com sucesso! Em breve voc√™ receber√° vitrines no WhatsApp.';
            feedback.style.display = 'block';
            form.reset();
            form.classList.remove('was-validated');
            
            // Scroll para o feedback
            feedback.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          } else {
            // Erro
            feedback.className = 'alert alert-danger mt-3';
            feedback.textContent = result.message || 'Erro ao processar seu cadastro. Por favor, tente novamente.';
            feedback.style.display = 'block';
          }
        } catch (error) {
          // Erro de rede
          feedback.className = 'alert alert-danger mt-3';
          feedback.textContent = 'Erro de conex√£o. Por favor, verifique sua internet e tente novamente.';
          feedback.style.display = 'block';
        } finally {
          // Reabilitar bot√£o
          submitBtn.disabled = false;
          submitText.textContent = 'Quero receber vitrines no WhatsApp';
          submitSpinner.style.display = 'none';
        }
      }, false);
    })();
  </script>
</body>
</html>